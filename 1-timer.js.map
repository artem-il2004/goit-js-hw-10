{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\n\nconst startBTN = document.querySelector(\"button[data-start]\");\n\nconst inputField = document.querySelector(\"#datetime-picker\");\nstartBTN.disabled = true;\nlet timer;\nlet userSelectedDate;\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    userSelectedDate = selectedDates[0];\n\n   \n    if (userSelectedDate && userSelectedDate.getTime() < Date.now()) {\n      startBTN.disabled = true; \n      iziToast.error({\n        title: \"Error\",\n        message: \"Please choose a date in the future\",\n        iconUrl: \"../img/error.svg\",\n        titleColor: 'white', \n        messageColor: 'white', \n         color: \"#ef4040\",\n});\n    } else {\n      startBTN.disabled = false; \n    }\n  },\n};\n\n\nconst pad = (value) => {\n  \n  return value < 10 ? '0' + value : value;\n};\n\nflatpickr('#datetime-picker', options);\n\nstartBTN.addEventListener(\"click\", function() {\n  if (userSelectedDate) {\n    timerChanger(userSelectedDate);\n  }\n});\n\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = Math.floor(ms / day);\n  // Remaining hours\n  const hours = Math.floor((ms % day) / hour);\n  // Remaining minutes\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  // Remaining seconds\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n\n\nfunction timerChanger(userSelectedDate) {\n\n    if (timer) { \n        clearInterval(timer);\n    }\n   \n    \n    timer = setInterval(() => {\n    const currTime = Date.now();\n    const timeDiff = userSelectedDate - currTime;\n        \n        if (timeDiff <= 0) {\n          clearInterval(timer);\n          startBTN.disabled = false;\n          inputField.disabled = false;\n          inputField.style.cursor = \"text\";\n        }\n        else { \n          startBTN.disabled = true;\n          inputField.disabled = true;\n          inputField.style.cursor = \"default\";\n            const { days, hours, minutes, seconds } = convertMs(timeDiff);\n        document.querySelector(\"[data-days]\").innerText = pad(days);\n        document.querySelector(\"[data-hours]\").innerText = pad(hours);\n        document.querySelector(\"[data-minutes]\").innerText = pad(minutes);\n        document.querySelector(\"[data-seconds]\").innerText = pad(seconds);    \n\n        }\n   }, 1000);\n    \n     \n}\n"],"names":["startBTN","inputField","timer","userSelectedDate","options","selectedDates","iziToast","pad","value","flatpickr","timerChanger","convertMs","ms","days","hours","minutes","seconds","currTime","timeDiff"],"mappings":"2GAQA,MAAMA,EAAW,SAAS,cAAc,oBAAoB,EAEtDC,EAAa,SAAS,cAAc,kBAAkB,EAC5DD,EAAS,SAAW,GACpB,IAAIE,EACAC,EAEJ,MAAMC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACrBF,EAAmBE,EAAc,CAAC,EAG9BF,GAAoBA,EAAiB,QAAS,EAAG,KAAK,IAAG,GAC3DH,EAAS,SAAW,GACpBM,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,QAAS,mBACT,WAAY,QACZ,aAAc,QACb,MAAO,SAChB,CAAC,GAEKN,EAAS,SAAW,EAEvB,CACH,EAGMO,EAAOC,GAEJA,EAAQ,GAAK,IAAMA,EAAQA,EAGpCC,EAAU,mBAAoBL,CAAO,EAErCJ,EAAS,iBAAiB,QAAS,UAAW,CACxCG,GACFO,EAAaP,CAAgB,CAEjC,CAAC,EAGD,SAASQ,EAAUC,EAAI,CAQrB,MAAMC,EAAO,KAAK,MAAMD,EAAK,KAAG,EAE1BE,EAAQ,KAAK,MAAOF,EAAK,MAAO,IAAI,EAEpCG,EAAU,KAAK,MAAQH,EAAK,MAAO,KAAQ,GAAM,EAEjDI,EAAU,KAAK,MAASJ,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAC,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAIA,SAASN,EAAaP,EAAkB,CAEhCD,GACA,cAAcA,CAAK,EAIvBA,EAAQ,YAAY,IAAM,CAC1B,MAAMe,EAAW,KAAK,MAChBC,EAAWf,EAAmBc,EAEhC,GAAIC,GAAY,EACd,cAAchB,CAAK,EACnBF,EAAS,SAAW,GACpBC,EAAW,SAAW,GACtBA,EAAW,MAAM,OAAS,WAEvB,CACHD,EAAS,SAAW,GACpBC,EAAW,SAAW,GACtBA,EAAW,MAAM,OAAS,UACxB,KAAM,CAAE,KAAAY,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,GAAYL,EAAUO,CAAQ,EAChE,SAAS,cAAc,aAAa,EAAE,UAAYX,EAAIM,CAAI,EAC1D,SAAS,cAAc,cAAc,EAAE,UAAYN,EAAIO,CAAK,EAC5D,SAAS,cAAc,gBAAgB,EAAE,UAAYP,EAAIQ,CAAO,EAChE,SAAS,cAAc,gBAAgB,EAAE,UAAYR,EAAIS,CAAO,CAE/D,CACL,EAAE,GAAI,CAGV"}